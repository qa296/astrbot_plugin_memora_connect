<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Memora Dashboard</title>
  <link rel="stylesheet" href="/static/style.css">
  <script src="https://unpkg.com/cytoscape@3.26.0/dist/cytoscape.min.js"></script>
  <!-- Simple icons if needed, can add FontAwesome here if internet access allows, otherwise use unicode/svg -->
</head>
<body>
  <header>
    <div class="brand">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M12 2L2 7L12 12L22 7L12 2Z" stroke="#007AFF" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        <path d="M2 17L12 22L22 17" stroke="#007AFF" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        <path d="M2 12L12 17L22 12" stroke="#007AFF" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
      <h1>Memora</h1>
    </div>
    <div class="toolbar">
      <select id="groupSelect"></select>
      <input type="password" id="tokenInput" placeholder="访问令牌">
      <button id="refreshBtn" class="primary">刷新</button>
    </div>
  </header>

  <main>
    <!-- Left Column: Concepts -->
    <div class="sidebar">
      <section class="panel" style="flex: 1;">
        <div class="panel-header">
          <h2>概念</h2>
        </div>
        <div class="panel-body">
          <div class="form-grid" style="margin-bottom: 12px;">
            <div class="form-row">
              <input type="text" id="newConceptName" placeholder="新概念名称" style="flex:1;">
              <button id="addConceptBtn" class="primary">+</button>
            </div>
          </div>
          <div class="list" id="conceptList"></div>
        </div>
      </section>
    </div>

    <!-- Center Column: Graph & Memories -->
    <div class="center-stage">
      <section class="panel" style="height: 500px; flex-shrink: 0;">
        <div class="panel-header">
          <h2>记忆图谱</h2>
        </div>
        <div class="panel-body" style="padding: 0;">
          <div id="graph"></div>
        </div>
      </section>

      <section class="panel" style="flex: 1;">
        <div class="panel-header">
          <h2>记忆详情</h2>
        </div>
        <div class="panel-body">
          <div class="form-grid" style="margin-bottom: 20px;">
            <div class="form-row">
              <input type="text" id="memContent" placeholder="内容" style="flex: 2;">
              <input type="text" id="memDetails" placeholder="细节" style="flex: 2;">
              <button id="addMemoryBtn" class="primary">添加</button>
            </div>
            <div class="form-row">
              <input type="text" id="memParticipants" placeholder="参与者">
              <input type="text" id="memTags" placeholder="标签">
              <input type="text" id="memEmotion" placeholder="情感">
            </div>
            <div class="form-row">
              <input type="text" id="memLocation" placeholder="地点">
              <input type="number" id="memStrength" placeholder="强度(0-1)" step="0.1" min="0" max="1">
            </div>
          </div>
          <div class="list" id="memoryList"></div>
        </div>
      </section>
    </div>

    <!-- Right Column: Impressions & Search -->
    <div class="sidebar">
      <!-- Search Panel -->
      <section class="panel">
        <div class="panel-header">
          <h2>搜索</h2>
        </div>
        <div class="panel-body">
          <div class="form-row">
            <input type="text" id="memSearchQuery" placeholder="搜索记忆..." style="flex: 1;">
            <button id="memSearchBtn" class="primary">Go</button>
            <button id="memSearchClearBtn">X</button>
          </div>
          <div class="list" id="memSearchList" style="margin-top: 12px; max-height: 200px; overflow-y: auto;"></div>
        </div>
      </section>

      <!-- Impressions Panel -->
      <section class="panel" style="flex: 1;">
        <div class="panel-header">
          <h2>人物印象</h2>
        </div>
        <div class="panel-body">
           <div class="form-grid" style="margin-bottom: 12px;">
             <div class="form-row">
                <input type="text" id="impPerson" placeholder="人物" style="flex: 1;">
                <input type="number" id="impScore" placeholder="分数" style="width: 60px;">
                <button id="addImpBtn" class="primary">记录</button>
             </div>
             <input type="text" id="impSummary" placeholder="摘要">
             <input type="text" id="impDetails" placeholder="详细">
           </div>
           
           <div class="list" id="impList" style="margin-bottom: 12px; max-height: 200px; overflow-y: auto;"></div>
           
           <div id="impDetail" class="impression-detail" style="display: none;"></div>
           
           <div class="form-row" style="margin-top: 12px;">
             <input type="number" id="impDelta" placeholder="调整(-1~1)" step="0.1" min="-1" max="1" style="flex:1">
             <button id="impAdjustBtn">调整好感</button>
           </div>
        </div>
      </section>

      <!-- Connections Panel -->
      <section class="panel">
        <div class="panel-header">
          <h2>连接</h2>
        </div>
        <div class="panel-body">
          <div class="form-grid" style="margin-bottom: 12px;">
            <div class="form-row">
              <input type="text" id="connFrom" placeholder="From" style="flex: 1;">
              <input type="text" id="connTo" placeholder="To" style="flex: 1;">
            </div>
            <div class="form-row">
              <input type="number" id="connStrength" placeholder="强度" value="1" step="0.1" min="0" max="1" style="flex: 1;">
              <button id="addConnBtn" class="primary">连线</button>
            </div>
          </div>
          <div class="list" id="connList" style="max-height: 200px; overflow-y: auto;"></div>
        </div>
      </section>
    </div>
  </main>

  <script src="/static/app.js"></script>
</body>
</html>
